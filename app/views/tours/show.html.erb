<div class="container">
  <div class="row tour-header">
    <div class="small-8 columns">
      <h2><%= @tour.name %></h2>
    </div>
    <div class="small-4 columns tour-stats">
      <ul>
        <li>Length of Time:</li>
        <li>Distance:</li>
        <li>Strenuous?</li>
      </ul>
    </div>
  </div>

<% if @tour.owner?(current_user) %>
  <%= link_to "New Stop", new_tour_stop_path(@tour), class: :button %>
  <%= link_to "Edit Tour", edit_tour_path, class: :button %>
  <%= link_to "Delete Tour", @tour, method: :delete, class: :button, data: {confirm: "Are you sure?"} %>
<% end %>
<button id="start_directions">Directions to Tour Start</button>
<div class="row">
  <div id="map-canvas" class="small-8 columns"></div>
  <div class="small-4 columns">
    <div class="tour-content">
      <div class="stop-list">
      <% @stops.each do |stop| %>
        <a href=#>
          <div id="<%= stop.name.parameterize.underscore %>" class="tour-stop-name" >
            <%= TourStop.where(tour_id: @tour, stop_id: stop).first.stop_number %> <%= stop.name %>
          </div>
        <div class="tour-stop-body">
        </a>
          <%= stop.description %>
          <div id="<%= stop.name.parameterize.underscore + "_directions" %>" class="next-stop-directions"><button class="tiny button">Directions</button></div>
          <% if @tour.owner?(current_user) %>
            <div class="crud-buttons">
              <%= link_to "Edit Stop", edit_tour_stop_path(@tour, stop), class: "tiny button" %>
              <%= link_to "Delete Stop", [@tour, stop], method: :delete, class: "tiny button" %>
            </div>
          <% end %>
        </div>
      <% end %>
      </div>
    </div>
  </div>
  <div id="directions-text"></div>
</div>

<script type="text/javascript">
  var stops = <%= @stops.to_json.html_safe %>
  var tour_stops = <%= @tour.tour_stops.to_json.html_safe %>
  var tour_data = <%= @tour_data.to_json.html_safe %>
</script>
</div>
